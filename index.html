<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>StrumGen - Конструктор боя</title>
  <!-- Tailwind CSS из CDN -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?display=swap&family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&family=Space+Grotesk%3Awght%40400%3B500%3B700" onload="this.rel='stylesheet'">
  <!-- html2canvas (для экспорта в PNG) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    body {
      font-family: "Space Grotesk", "Noto Sans", sans-serif;
    }
  </style>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="relative flex size-full min-h-screen flex-col bg-gray-950 dark group/design-root overflow-x-hidden">
    <div class="layout-container flex h-full grow flex-col pt-20">
      <!-- Header -->
      <header class="fixed top-0 left-0 right-0 z-50 flex flex-col md:flex-row items-center justify-between whitespace-nowrap border-b border-solid border-gray-800 px-4 md:px-10 py-4 gap-4 bg-gray-950">
        <div class="flex items-center gap-4 text-white w-full md:w-auto">
          <svg class="size-6 text-[#38e07b]" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 4h6.5v6.5h6.5v6.5h6.5V20H4V4Z" fill="currentColor"></path>
          </svg>
          <h2 class="text-white text-xl font-bold leading-tight tracking-[-0.015em]">StrumGen</h2>
          <!-- Кнопка для мобильного меню -->
          <button id="mobileMenuBtn" class="md:hidden ml-auto text-white active">
            <svg class="size-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
          </button>
        </div>
        <!-- Мобильное меню (по умолчанию скрыто) -->
        <div id="mobileMenu" class="md:hidden w-full">
          <div class="flex flex-col gap-4 py-4 border-t border-gray-800 mt-4">
            <a class="text-gray-300 hover:text-white text-base font-medium leading-normal transition-colors" href="#">Конструктор</a>
            <a class="text-gray-300 hover:text-white text-base font-bold leading-normal transition-colors" href="https://www.soundslice.com/guitar-pro-viewer/" target="_blank">GuitarPro ONLINE</a>
            <a class="text-gray-300 hover:text-white text-base font-medium leading-normal transition-colors" href="#">Обучение</a>
            <a class="text-gray-300 hover:text-white text-base font-medium leading-normal transition-colors" href="songs.html">Песни</a>
            <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 mt-2" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBepsoz0Ttndewom09t3rZe9woL7Juaz7eIy3urj96ozolywdfPnY8w_mYG72-Z6AEQCgY4Lwzbcj4NwxrdaSp2LqGCzeo92oCMkJqP4vniQ9ZdPXF8y7DVFPTxYDYycAq7oRGcfc_MM6VwS6QD03Px1DjvfebmJsR0oy5QmOu8gfPjJShKZwJDLjCX85GGTFRphJ_ZrvrTGMgNiKVjJGarsdiosqULem5APpkG0f7wI37_FBWWUwSqHfXngOrWqZC7hWRTcJ575y-p");'></div>
          </div>
        </div>
        <!-- Десктопное меню -->
        <div class="hidden md:flex flex-1 justify-end gap-6">
          <div class="flex items-center gap-8">
            <a class="text-gray-300 hover:text-white text-base font-medium leading-normal transition-colors" href="#">Конструктор</a>
            <a class="text-gray-300 hover:text-white text-base font-bold leading-normal transition-colors" href="https://www.soundslice.com/guitar-pro-viewer/" target="_blank">GuitarPro ONLINE</a>
            <a class="text-gray-300 hover:text-white text-base font-medium leading-normal transition-colors" href="#">Обучение</a>
            <a class="text-gray-300 hover:text-white text-base font-medium leading-normal transition-colors" href="songs.html">Песни</a>
          </div>
          <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBepsoz0Ttndewom09t3rZe9woL7Juaz7eIy3urj96ozolywdfPnY8w_mYG72-Z6AEQCgY4Lwzbcj4NwxrdaSp2LqGCzeo92oCMkJqP4vniQ9ZdPXF8y7DVFPTxYDYycAq7oRGcfc_MM6VwS6QD03Px1DjvfebmJsR0oy5QmOu8gfPjJShKZwJDLjCX85GGTFRphJ_ZrvrTGMgNiKVjJGarsdiosqULem5APpkG0f7wI37_FBWWUwSqHfXngOrWqZC7hWRTcJ575y-p");'></div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="flex flex-1 justify-center py-10 px-4 overflow-x-hidden">
        <div class="layout-content-container flex w-full flex-col items-center gap-8 px-4">
          <div class="w-full max-w-2xl text-center">
            <h1 class="text-white text-4xl md:text-5xl font-bold leading-tight tracking-tighter">Guitar Strumming Pattern Generator</h1>
            <p class="text-gray-400 text-base md:text-lg font-normal leading-normal mt-4">
              Мгновенно создавайте и визуализируйте гитарные бои для ваших любимых песен. Введите аккорды, настройте темп и начните практиковаться.
            </p>
          </div>
          
          <div class="flex w-full flex-col md:flex-row items-start gap-6 md:gap-8 min-w-0">
            <!-- Основная область боя -->
            <div class="flex flex-1 flex-col items-center gap-6 rounded-lg bg-gray-900/50 p-4 md:p-6 border border-gray-800 w-full relative min-w-0 overflow-hidden beat-area-container">
              <div class="w-full relative">
                <div class="flex items-center justify-between pb-2">
                  <label class="text-white text-lg font-medium leading-normal" for="chordsInput">Аккорды</label>
                  <button id="optionsBtn" class="hidden flex items-center gap-2 px-4 py-2 rounded-md bg-gray-800 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors text-sm font-medium">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                    Опции
                  </button>
                </div>
                <input class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-md text-white focus:outline-0 focus:ring-2 focus:ring-[#38e07b] border border-gray-700 bg-gray-900 h-12 placeholder:text-gray-500 p-4 text-base font-normal leading-normal" id="chordsInput" placeholder="Введите аккорды через пробел (например, Am G C F)" value="Am F Dm E"/>
                
                <!-- Выпадающее меню опций -->
                <div id="optionsMenu" class="hidden absolute top-full right-0 mt-2 w-80 max-h-[70vh] overflow-y-auto bg-gray-800 rounded-lg shadow-2xl border border-gray-700 p-4 z-30">
                  <!-- Контент панели управления будет здесь -->
                </div>
              </div>

              <!-- Область визуализации боя -->
              <div class="relative w-full min-w-0 flex-1 min-h-[400px] bg-gray-900 rounded-md border border-gray-800 overflow-x-auto overflow-y-hidden flex flex-col items-center justify-center beat-visualization-container">
                <!-- Кнопка настроек -->
                <div class="absolute top-3 right-3 z-20">
                  <button id="settingsBtn" class="flex items-center justify-center w-10 h-10 rounded-full bg-gray-800 text-gray-300 hover:bg-gray-700 hover:text-white transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                  </button>
                  <!-- Выпадающее меню настроек -->
                  <div id="settingsMenu" class="hidden absolute top-12 right-0 w-72 bg-gray-800 rounded-lg shadow-2xl border border-gray-700 p-4">
                    <h3 class="text-white text-lg font-medium mb-4">Настройки звука</h3>
                    
                    <!-- Громкость боя -->
                    <div class="mb-5">
                      <div class="flex justify-between items-center mb-2">
                        <label class="text-gray-300 text-sm font-medium">Громкость боя</label>
                        <span id="strumVolumeLabel" class="text-[#38e07b] text-sm font-bold">80%</span>
                      </div>
                      <input id="strumVolume" type="range" min="0" max="100" value="80" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-[#38e07b]">
                    </div>
                    
                    <!-- Громкость метронома -->
                    <div class="mb-5">
                      <div class="flex justify-between items-center mb-2">
                        <label class="text-gray-300 text-sm font-medium">Громкость метронома</label>
                        <span id="metronomeVolumeLabel" class="text-[#38e07b] text-sm font-bold">100%</span>
                      </div>
                      <input id="metronomeVolume" type="range" min="0" max="100" value="100" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-[#38e07b]">
                    </div>

                    <!-- Разделитель -->
                    <div id="barManagementDivider" class="border-t border-gray-700 my-4 hidden"></div>

                    <!-- Кнопка сброса тактов -->
                    <div id="barManagementSection" class="hidden">
                      <h3 class="text-white text-base font-medium mb-3">Управление тактами</h3>
                      <button id="resetBarsBtn" class="w-full px-4 py-2 bg-gray-700 text-gray-200 rounded-md hover:bg-gray-600 transition-colors font-medium text-sm">
                        Сбросить к базовому состоянию
                      </button>
                      <p class="text-xs text-gray-500 mt-2">Вернуть такты к состоянию "1 строка = 1 такт"</p>
                    </div>
                  </div>
                </div>
                
                <!-- Отображение текущего и следующего аккорда -->
                <div id="chordDisplay" class="absolute top-2 left-1/2 transform -translate-x-1/2 flex items-center gap-3 z-10">
                  <!-- Аккорды будут отображаться здесь динамически -->
                </div>
                <div class="flex justify-center w-full">
                  <div id="beatRow" class="grid grid-cols-8 gap-4 px-4 beat-grid">
                    <!-- Стрелки будут генерироваться здесь динамически -->
                  </div>
                </div>
                <div class="absolute bottom-6 left-1/2 -translate-x-1/2">
                  <button id="toggleBtn" class="flex items-center justify-center rounded-full bg-[#38e07b] p-4 text-gray-950 shadow-lg transition-transform hover:scale-110">
                    <svg class="h-8 w-8" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path d="M8 5v14l11-7z"></path>
                    </svg>
                  </button>
                </div>
              </div>

              <!-- Текст песни -->
              <div id="song-text-display" class="w-full rounded-lg bg-gray-900/50 p-4 md:p-6 border border-gray-800 hidden">
                <div class="w-full">
                  <div class="flex items-center justify-between pb-4">
                    <h3 class="text-white text-lg font-medium leading-normal">Текст песни</h3>
                    <div class="flex items-center gap-2">
                      <button id="edit-song-text-btn" class="text-gray-400 hover:text-[#38e07b] transition-colors p-1" title="Редактировать текст песни">
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                        </svg>
                      </button>
                      <button id="clear-song-text-btn" class="text-gray-400 hover:text-red-400 transition-colors p-1" title="Очистить текст песни">
                        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                        </svg>
                      </button>
                    </div>
                  </div>
                  <div id="song-content" class="text-gray-300 text-base leading-relaxed whitespace-pre-line"></div>
                </div>
              </div>

              <p class="text-gray-400 text-sm font-normal leading-normal text-center">
                Заполненные кружки указывают на удар по струнам, пустые кружки указывают на отсутствие удара в этом направлении руки.
              </p>
            </div>

            <!-- Панель управления -->
            <div id="controlPanel" class="w-full md:w-80 flex-shrink-0 flex flex-col gap-6 rounded-lg bg-gray-900/50 p-4 md:p-6 border border-gray-800">
              <!-- Шаблоны-->
               <div class="w-full">
                <label class="text-white text-lg font-medium leading-normal pb-2 block" for="templates-select">Шаблоны</label>
                  <div class="relative">
                    <select class="form-select w-full min-w-0 flex-1 resize-none overflow-hidden rounded-md text-white focus:outline-0 focus:ring-2 focus:ring-[#38e07b] border border-gray-700 bg-gray-900 h-12 placeholder:text-gray-500 px-4 text-base font-normal leading-normal appearance-none" id="templates-select">
                    <option value="">Выберите шаблон</option>
                    </select>
                      <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                      <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                      <path clip-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" fill-rule="evenodd"></path>
                      </svg>
                      </div>
                  </div>
                </div> 

              <!-- Темп (BPM) -->
              <div class="w-full">
                <div class="flex w-full items-center justify-between pb-2">
                  <label class="text-white text-lg font-medium leading-normal" for="bpm">Темп (BPM)</label>
                  <div class="flex items-center gap-2">
                    <button id="bpmDecrement" class="w-8 h-8 flex items-center justify-center rounded-md bg-gray-800 border border-gray-700 text-white hover:bg-gray-700 hover:border-[#38e07b] transition-colors text-xl font-bold" title="Уменьшить темп на 1">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M20 12H4"/>
                      </svg>
                    </button>
                    <button id="bpmIncrement" class="w-8 h-8 flex items-center justify-center rounded-md bg-gray-800 border border-gray-700 text-white hover:bg-gray-700 hover:border-[#38e07b] transition-colors text-xl font-bold" title="Увеличить темп на 1">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M12 4v16m8-8H4"/>
                      </svg>
                    </button>
                  </div>
                </div>
                <div class="flex items-center gap-4">
                  <input class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-[#38e07b]" id="bpm" max="200" min="40" type="range" value="90"/>
                  <div class="w-16 h-10 flex items-center justify-center rounded-md bg-gray-800 border border-gray-700 text-white text-lg font-medium">
                    <span id="bpmLabel">90</span>
                  </div>
                </div>
              </div>
              
              <!-- Количество стрелок -->
              <div class="w-full">
                <label class="text-white text-lg font-medium leading-normal pb-2 block" for="countSelect">Количество стрелок</label>
                <div class="relative">
                  <select class="form-select w-full min-w-0 flex-1 resize-none overflow-hidden rounded-md text-white focus:outline-0 focus:ring-2 focus:ring-[#38e07b] border border-gray-700 bg-gray-900 h-12 placeholder:text-gray-500 px-4 text-base font-normal leading-normal appearance-none" id="countSelect">
                    <option value="4">4</option>
                    <option value="8" selected>8</option>
                    <option value="16">16</option>
                  </select>
                  <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                    <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                      <path clip-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" fill-rule="evenodd"></path>
                    </svg>
                  </div>
                </div>
              </div>
              
              <!-- Кнопки действий -->
              <div class="flex flex-col gap-3 pt-4">
                <button id="generateBtn" class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-md h-12 px-4 bg-[#38e07b] text-gray-950 text-base font-bold leading-normal tracking-wide hover:bg-emerald-400 transition-colors">
                  <span class="truncate">Случайный бой</span>
                </button>
                <div class="flex flex-row gap-2">
                  <button id="exportPng" class="flex flex-1 cursor-pointer items-center justify-center overflow-hidden rounded-md h-12 px-4 bg-gray-800 text-white hover:bg-gray-700 transition-colors" title="Сохранить картинку боя">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                  </button>
                  <button id="downloadJson" class="flex flex-1 cursor-pointer items-center justify-center overflow-hidden rounded-md h-12 px-4 bg-gray-800 text-white hover:bg-gray-700 transition-colors" title="Скачать настройки боя">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                  </button>
                  <button id="importJson" class="flex flex-1 cursor-pointer items-center justify-center overflow-hidden rounded-md h-12 px-4 bg-gray-800 text-white hover:bg-gray-700 transition-colors" title="Импорт настроек из файла">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3-3m0 0l3 3m-3-3v12"></path>
                    </svg>
                  </button>
                </div>
                <!-- Кнопка "Сохранить песню" (показывается когда есть текст) -->
                <button id="saveSongBtn" class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-md h-12 px-4 bg-[#38e07b] text-gray-950 text-base font-bold leading-normal tracking-wide hover:bg-emerald-400 transition-colors hidden" title="Сохранить полную песню (текст, слоги, аккорды, бой)">
                  <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                  </svg>
                  <span class="truncate">Сохранить песню</span>
                </button>
                
                <!-- Кнопка "Импорт песни" (показывается когда нет текста) -->
                <button id="importSongBtn" class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-md h-12 px-4 bg-[#38e07b] text-gray-950 text-base font-bold leading-normal tracking-wide hover:bg-emerald-400 transition-colors" title="Импортировать полную песню из JSON файла">
                  <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3-3m0 0l3 3m-3-3v12"></path>
                  </svg>
                  <span class="truncate">Импорт песни</span>
                </button>
                <button id="addSongTextBtn" class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-md h-12 px-4 bg-[#38e07b] text-gray-950 text-base font-bold leading-normal tracking-wide hover:bg-emerald-400 transition-colors">
                  <span class="truncate">Добавить текст песни</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </main>
      
      <!-- Footer -->
      <footer class="w-full border-t border-solid border-gray-800 mt-10">
        <div class="max-w-6xl mx-auto px-4">
          <div class="flex flex-col gap-6 px-5 py-10 text-center">
          <div class="flex flex-wrap items-center justify-center gap-4 md:gap-6">
            <a class="text-gray-400 hover:text-white text-sm md:text-base font-normal leading-normal min-w-32 md:min-w-40 transition-colors" href="#">Политика конфиденциальности</a>
            <a class="text-gray-400 hover:text-white text-sm md:text-base font-normal leading-normal min-w-32 md:min-w-40 transition-colors" href="#">Условия использования</a>
          </div>
            <div class="flex flex-wrap justify-center gap-4">
              <a class="text-gray-400 hover:text-white transition-colors" href="https://youtube.com/@matteodimassi?si=SM_HjRHeBHJqQVPH" target="_blank">
                <svg class="size-6" fill="currentColor" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
                  <!-- Внешний квадрат со скруглёнными углами -->
                  <path d="M176,24H80A56.06,56.06,0,0,0,24,80v96a56.06,56.06,0,0,0,56,56h96a56.06,56.06,0,0,0,56-56V80A56.06,56.06,0,0,0,176,24Zm40,152a40,40,0,0,1-40,40H80a40,40,0,0,1-40-40V80A40,40,0,0,1,80,40h96a40,40,0,0,1,40,40Z"></path>
                  <!-- Треугольник Play -->
                  <path d="M112 96v64l48-32z" fill="currentColor"></path>
                </svg>
              </a>
              <a class="text-gray-400 hover:text-white transition-colors" href="https://www.instagram.com/matteodimassi?igsh=enl6aHQxenpqd3Fl" target="_blank">
                <svg class="size-6" fill="currentColor" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
                  <path d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160ZM176,24H80A56.06,56.06,0,0,0,24,80v96a56.06,56.06,0,0,0,56,56h96a56.06,56.06,0,0,0,56-56V80A56.06,56.06,0,0,0,176,24Zm40,152a40,40,0,0,1-40,40H80a40,40,0,0,1-40-40V80A40,40,0,0,1,80,40h96a40,40,0,0,1,40,40ZM192,76a12,12,0,1,1-12-12A12,12,0,0,1,192,76Z"></path>
                </svg>
              </a>
              <a class="text-gray-400 hover:text-white transition-colors" href="#" target="_blank">
                <svg class="size-6" fill="currentColor" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
  <path d="M230.4,65.6,200,200c-1.6,7.2-6.4,9.6-12.8,6.4l-55.2-40.8-26.4,25.6c-2.4,2.4-4.8,4-9.6,4l3.2-46.4L192,88c3.2-2.4-.8-5.6-4.8-3.2l-92.8,58.4-40-12.8c-8.8-2.4-9.6-9.6,1.6-14.4l155.2-59.2C220,54.4,232,58.4,230.4,65.6Z"/>
</svg>
              </a>
            </div>
            <p class="text-gray-400 text-base font-normal leading-normal">©2025 StrumGen. Все права защищены.</p>
          </div>
        </div>
      </footer>
    </div>
  </div>

  <script>
  // Получаем объект Telegram WebApp
  const tg = window.Telegram.WebApp;

  // Разворачиваем приложение на весь экран
  tg.expand();

  // Можно поменять цвет верхней панели (в Telegram)
  // tg.MainButton.setText("Отправить данные");
  // tg.MainButton.show();

  // // Обработка нажатия основной кнопки Telegram
  // tg.MainButton.onClick(() => {
  //   const chords = document.getElementById("chordsInput").value;
  //   const bpm = document.getElementById("bpm").value;
  //   const count = document.getElementById("countSelect").value;

  //   const data = {
  //     chords,
  //     bpm,
  //     count
  //   };

  //   // Отправляем данные в бота
  //   tg.sendData(JSON.stringify(data));
  //});
  </script>
  <!-- Подключение основного JavaScript модуля -->
  <script type="module" src="js/main.js"></script>
  
  <!-- JavaScript для активных стилей навигации -->
  <script>
    // Функция для установки активных стилей навигации
    function setActiveNavigation() {
      // Определяем текущую страницу
      const path = window.location.pathname;
      const currentPage = path.split('/').pop() || 'index.html';
      
      // Активные стили (как у кнопки "Случайный бой" - с отступами и скруглёнными краями)
      const activeClasses = 'bg-[#38e07b] text-gray-950 font-bold rounded-full px-4 py-2 shadow-lg transition-transform';
      const inactiveClasses = 'text-gray-300 hover:text-white text-base font-medium leading-normal transition-colors';
      
      // Обновляем десктопное меню
      const desktopLinks = document.querySelectorAll('.hidden.md\\:flex .flex.items-center a');
      desktopLinks.forEach(link => {
        const linkText = link.textContent.trim();
        if ((linkText === 'Конструктор' && (currentPage === 'index.html' || currentPage === '' || currentPage === '/')) ||
            (linkText === 'Песни' && currentPage === 'songs.html')) {
          // Удаляем старые классы и добавляем активные
          link.className = link.className.replace(/text-gray-300 hover:text-white text-base font-medium leading-normal transition-colors/g, '');
          link.className = link.className.replace(/text-gray-300 primary-color text-base font-medium leading-normal transition-colors/g, '');
          link.className = link.className.replace(/bg-\[#38e07b\] text-gray-950 font-bold rounded-full px-4 py-2 shadow-lg transition-transform/g, '');
          link.className += ' ' + activeClasses;
        } else {
          // Возвращаем обычные стили для неактивных ссылок
          link.className = link.className.replace(/bg-\[#38e07b\] text-gray-950 font-bold rounded-full px-4 py-2 shadow-lg transition-transform/g, '');
          if (!link.classList.contains('text-gray-300')) {
            link.className = link.className.replace(/bg-\[#38e07b\] text-gray-950 font-bold rounded-full px-4 py-2 shadow-lg transition-transform/g, '');
            link.className = inactiveClasses;
          }
        }
      });
      
      // Обновляем мобильное меню
      const mobileLinks = document.querySelectorAll('.md\\:hidden a');
      mobileLinks.forEach(link => {
        const linkText = link.textContent.trim();
        if ((linkText === 'Конструктор' && (currentPage === 'index.html' || currentPage === '' || currentPage === '/')) ||
            (linkText === 'Песни' && currentPage === 'songs.html')) {
          // Удаляем старые классы и добавляем активные
          link.className = link.className.replace(/text-gray-300 hover:text-white text-base font-medium leading-normal transition-colors/g, '');
          link.className = link.className.replace(/text-gray-300 primary-color text-base font-medium leading-normal transition-colors/g, '');
          link.className = link.className.replace(/bg-\[#38e07b\] text-gray-950 font-bold rounded-full px-4 py-2 shadow-lg transition-transform/g, '');
          link.className += ' ' + activeClasses;
        } else {
          // Возвращаем обычные стили для неактивных ссылок
          link.className = link.className.replace(/bg-\[#38e07b\] text-gray-950 font-bold rounded-full px-4 py-2 shadow-lg transition-transform/g, '');
          if (!link.classList.contains('text-gray-300')) {
            link.className = link.className.replace(/bg-\[#38e07b\] text-gray-950 font-bold rounded-full px-4 py-2 shadow-lg transition-transform/g, '');
            link.className = inactiveClasses;
          }
        }
      });
    }
    
    // Вызываем функцию при загрузке страницы
    document.addEventListener('DOMContentLoaded', setActiveNavigation);
  </script>
</body>
</html>
