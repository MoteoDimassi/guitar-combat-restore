<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>StrumGen - Конструктор боя</title>
  <!-- Tailwind CSS из CDN -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?display=swap&family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&family=Space+Grotesk%3Awght%40400%3B500%3B700" onload="this.rel='stylesheet'">
  <!-- html2canvas (для экспорта в PNG) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    body {
      font-family: "Space Grotesk", "Noto Sans", sans-serif;
    }
  </style>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <div class="relative flex size-full min-h-screen flex-col bg-gray-950 dark group/design-root overflow-x-hidden">
    <div class="layout-container flex h-full grow flex-col pt-20">
      <!-- Header -->
      <header class="fixed top-0 left-0 right-0 z-50 flex flex-col md:flex-row items-center justify-between whitespace-nowrap border-b border-solid border-gray-800 px-4 md:px-10 py-4 gap-4 bg-gray-950">
        <div class="flex items-center gap-4 text-white w-full md:w-auto">
          <svg class="size-6 text-[#38e07b]" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 4h6.5v6.5h6.5v6.5h6.5V20H4V4Z" fill="currentColor"></path>
          </svg>
          <h2 class="text-white text-xl font-bold leading-tight tracking-[-0.015em]">StrumGen</h2>
          <!-- Кнопка для мобильного меню -->
          <button id="mobileMenuBtn" class="md:hidden ml-auto text-white active">
            <svg class="size-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
          </button>
        </div>
        <!-- Мобильное меню (по умолчанию скрыто) -->
        <div id="mobileMenu" class="md:hidden w-full">
          <div class="flex flex-col gap-4 py-4 border-t border-gray-800 mt-4">
            <a class="text-gray-300 hover:text-white text-base font-medium leading-normal transition-colors" href="#">Конструктор</a>
            <a class="text-gray-300 hover:text-white text-base font-bold leading-normal transition-colors" href="https://www.soundslice.com/guitar-pro-viewer/" target="_blank">GuitarPro ONLINE</a>
            <a class="text-gray-300 hover:text-white text-base font-medium leading-normal transition-colors" href="#">Обучение</a>
            <a class="text-gray-300 hover:text-white text-base font-medium leading-normal transition-colors" href="#">Галерея</a>
            <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 mt-2" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBepsoz0Ttndewom09t3rZe9woL7Juaz7eIy3urj96ozolywdfPnY8w_mYG72-Z6AEQCgY4Lwzbcj4NwxrdaSp2LqGCzeo92oCMkJqP4vniQ9ZdPXF8y7DVFPTxYDYycAq7oRGcfc_MM6VwS6QD03Px1DjvfebmJsR0oy5QmOu8gfPjJShKZwJDLjCX85GGTFRphJ_ZrvrTGMgNiKVjJGarsdiosqULem5APpkG0f7wI37_FBWWUwSqHfXngOrWqZC7hWRTcJ575y-p");'></div>
          </div>
        </div>
        <!-- Десктопное меню -->
        <div class="hidden md:flex flex-1 justify-end gap-6">
          <div class="flex items-center gap-8">
            <a class="text-gray-300 hover:text-white text-base font-medium leading-normal transition-colors" href="#">Конструктор</a>
            <a class="text-gray-300 hover:text-white text-base font-bold leading-normal transition-colors" href="https://www.soundslice.com/guitar-pro-viewer/" target="_blank">GuitarPro ONLINE</a>
            <a class="text-gray-300 hover:text-white text-base font-medium leading-normal transition-colors" href="#">Обучение</a>
            <a class="text-gray-300 hover:text-white text-base font-medium leading-normal transition-colors" href="#">Галерея</a>
          </div>
          <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBepsoz0Ttndewom09t3rZe9woL7Juaz7eIy3urj96ozolywdfPnY8w_mYG72-Z6AEQCgY4Lwzbcj4NwxrdaSp2LqGCzeo92oCMkJqP4vniQ9ZdPXF8y7DVFPTxYDYycAq7oRGcfc_MM6VwS6QD03Px1DjvfebmJsR0oy5QmOu8gfPjJShKZwJDLjCX85GGTFRphJ_ZrvrTGMgNiKVjJGarsdiosqULem5APpkG0f7wI37_FBWWUwSqHfXngOrWqZC7hWRTcJ575y-p");'></div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="flex flex-1 justify-center py-10 px-4">
        <div class="layout-content-container flex w-full max-w-6xl flex-col items-center gap-8">
          <div class="w-full max-w-2xl text-center">
            <h1 class="text-white text-4xl md:text-5xl font-bold leading-tight tracking-tighter">Guitar Strumming Pattern Generator</h1>
            <p class="text-gray-400 text-base md:text-lg font-normal leading-normal mt-4">
              Мгновенно создавайте и визуализируйте гитарные бои для ваших любимых песен. Введите аккорды, настройте темп и начните практиковаться.
            </p>
          </div>
          
          <div class="flex w-full flex-col md:flex-row items-start gap-6 md:gap-8">
            <!-- Основная область боя -->
            <div class="flex flex-1 flex-col items-center gap-6 rounded-lg bg-gray-900/50 p-4 md:p-6 border border-gray-800 w-full">
              <div class="w-full">
                <label class="text-white text-lg font-medium leading-normal pb-2 block" for="chordsInput">Аккорды</label>
                <input class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-md text-white focus:outline-0 focus:ring-2 focus:ring-[#38e07b] border border-gray-700 bg-gray-900 h-12 placeholder:text-gray-500 p-4 text-base font-normal leading-normal" id="chordsInput" placeholder="Введите аккорды через пробел (например, Am G C F)" value="Am F Dm E"/>
              </div>
              
              <!-- Область визуализации боя -->
              <div class="relative w-full h-[400px] bg-gray-900 rounded-md border border-gray-800 overflow-hidden flex flex-col items-center justify-center">
                <div id="beatRow" class="grid grid-cols-8 gap-4 w-full px-4">
                  <!-- Стрелки будут генерироваться здесь динамически -->
                </div>
                <div class="absolute bottom-6 left-1/2 -translate-x-1/2">
                  <button id="toggleBtn" class="flex items-center justify-center rounded-full bg-[#38e07b] p-4 text-gray-950 shadow-lg transition-transform hover:scale-110">
                    <svg class="h-8 w-8" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path d="M8 5v14l11-7z"></path>
                    </svg>
                  </button>
                </div>
              </div>
              <p class="text-gray-400 text-sm font-normal leading-normal text-center">
                Заполненные кружки указывают на удар по струнам, пустые кружки указывают на отсутствие удара в этом направлении руки.
              </p>
            </div>
            
            <!-- Панель управления -->
            <div class="w-full md:w-80 flex-shrink-0 flex flex-col gap-6 rounded-lg bg-gray-900/50 p-4 md:p-6 border border-gray-800">
              <!-- Темп (BPM) -->
              <div class="w-full">
                <div class="flex w-full items-center justify-between pb-2">
                  <label class="text-white text-lg font-medium leading-normal" for="bpm">Темп (BPM)</label>
                </div>
                <div class="flex items-center gap-4">
                  <input class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-[#38e07b]" id="bpm" max="200" min="40" type="range" value="90"/>
                  <div class="w-16 h-10 flex items-center justify-center rounded-md bg-gray-800 border border-gray-700 text-white text-lg font-medium">
                    <span id="bpmLabel">90</span>
                  </div>
                </div>
              </div>
              
              <!-- Количество стрелок -->
              <div class="w-full">
                <label class="text-white text-lg font-medium leading-normal pb-2 block" for="countSelect">Количество стрелок</label>
                <div class="relative">
                  <select class="form-select w-full min-w-0 flex-1 resize-none overflow-hidden rounded-md text-white focus:outline-0 focus:ring-2 focus:ring-[#38e07b] border border-gray-700 bg-gray-900 h-12 placeholder:text-gray-500 px-4 text-base font-normal leading-normal appearance-none" id="countSelect">
                    <option value="4">4</option>
                    <option value="8" selected>8</option>
                    <option value="16">16</option>
                  </select>
                  <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                    <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                      <path clip-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" fill-rule="evenodd"></path>
                    </svg>
                  </div>
                </div>
              </div>
              
              <!-- Кнопки действий -->
              <div class="flex flex-col gap-3 pt-4">
                <button id="generateBtn" class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-md h-12 px-4 bg-[#38e07b] text-gray-950 text-base font-bold leading-normal tracking-wide hover:bg-emerald-400 transition-colors">
                  <span class="truncate">Сгенерировать случайный бой</span>
                </button>
                <button id="exportPng" class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-md h-12 px-4 bg-gray-800 text-white text-base font-bold leading-normal tracking-wide hover:bg-gray-700 transition-colors">
                  <span class="truncate">Экспорт в PNG</span>
                </button>
                <button id="downloadJson" class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-md h-12 px-4 bg-gray-800 text-white text-base font-bold leading-normal tracking-wide hover:bg-gray-700 transition-colors">
                  <span class="truncate">Скачать JSON</span>
                </button>
                <button id="importJson" class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-md h-12 px-4 bg-gray-800 text-white text-base font-bold leading-normal tracking-wide hover:bg-gray-700 transition-colors">
                  <span class="truncate">Импорт из JSON</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </main>
      
      <!-- Footer -->
      <footer class="w-full border-t border-solid border-gray-800 mt-10">
        <div class="max-w-6xl mx-auto px-4">
          <div class="flex flex-col gap-6 px-5 py-10 text-center">
          <div class="flex flex-wrap items-center justify-center gap-4 md:gap-6">
            <a class="text-gray-400 hover:text-white text-sm md:text-base font-normal leading-normal min-w-32 md:min-w-40 transition-colors" href="#">Политика конфиденциальности</a>
            <a class="text-gray-400 hover:text-white text-sm md:text-base font-normal leading-normal min-w-32 md:min-w-40 transition-colors" href="#">Условия использования</a>
            <a class="text-gray-400 hover:text-white text-sm md:text-base font-normal leading-normal min-w-32 md:min-w-40 transition-colors" href="#">Контакты</a>
          </div>
            <div class="flex flex-wrap justify-center gap-4">
              <a class="text-gray-400 hover:text-white transition-colors" href="https://youtube.com/@matteodimassi?si=SM_HjRHeBHJqQVPH" target="_blank">
                <svg class="size-6" fill="currentColor" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
                  <!-- Внешний квадрат со скруглёнными углами -->
                  <path d="M176,24H80A56.06,56.06,0,0,0,24,80v96a56.06,56.06,0,0,0,56,56h96a56.06,56.06,0,0,0,56-56V80A56.06,56.06,0,0,0,176,24Zm40,152a40,40,0,0,1-40,40H80a40,40,0,0,1-40-40V80A40,40,0,0,1,80,40h96a40,40,0,0,1,40,40Z"></path>
                  <!-- Треугольник Play -->
                  <path d="M112 96v64l48-32z" fill="currentColor"></path>
                </svg>
              </a>
              <a class="text-gray-400 hover:text-white transition-colors" href="https://www.instagram.com/matteodimassi?igsh=enl6aHQxenpqd3Fl" target="_blank">
                <svg class="size-6" fill="currentColor" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
                  <path d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160ZM176,24H80A56.06,56.06,0,0,0,24,80v96a56.06,56.06,0,0,0,56,56h96a56.06,56.06,0,0,0,56-56V80A56.06,56.06,0,0,0,176,24Zm40,152a40,40,0,0,1-40,40H80a40,40,0,0,1-40-40V80A40,40,0,0,1,80,40h96a40,40,0,0,1,40,40ZM192,76a12,12,0,1,1-12-12A12,12,0,0,1,192,76Z"></path>
                </svg>
              </a>
              <a class="text-gray-400 hover:text-white transition-colors" href="#" target="_blank">
                <svg class="size-6" fill="currentColor" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
  <path d="M230.4,65.6,200,200c-1.6,7.2-6.4,9.6-12.8,6.4l-55.2-40.8-26.4,25.6c-2.4,2.4-4.8,4-9.6,4l3.2-46.4L192,88c3.2-2.4-.8-5.6-4.8-3.2l-92.8,58.4-40-12.8c-8.8-2.4-9.6-9.6,1.6-14.4l155.2-59.2C220,54.4,232,58.4,230.4,65.6Z"/>
</svg>
              </a>
            </div>
            <p class="text-gray-400 text-base font-normal leading-normal">©2025 StrumGen. Все права защищены.</p>
          </div>
        </div>
      </footer>
    </div>
  </div>

  <script>
  // Получаем объект Telegram WebApp
  const tg = window.Telegram.WebApp;

  // Разворачиваем приложение на весь экран
  tg.expand();

  // Можно поменять цвет верхней панели (в Telegram)
  // tg.MainButton.setText("Отправить данные");
  // tg.MainButton.show();

  // // Обработка нажатия основной кнопки Telegram
  // tg.MainButton.onClick(() => {
  //   const chords = document.getElementById("chordsInput").value;
  //   const bpm = document.getElementById("bpm").value;
  //   const count = document.getElementById("countSelect").value;

  //   const data = {
  //     chords,
  //     bpm,
  //     count
  //   };

  //   // Отправляем данные в бота
  //   tg.sendData(JSON.stringify(data));
  //});
  </script>
  <!-- Подключение основного JavaScript модуля -->
  <script type="module" src="js/main.js"></script>
</body>
</html>
